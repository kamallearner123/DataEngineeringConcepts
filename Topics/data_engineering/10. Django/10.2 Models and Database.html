<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Models and Databases in Django</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f9f9f9;
            color: #333;
            margin: 0;
            padding: 0 20px;
        }
        header {
            background-color: #306998;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        h1 {
            margin: 0;
        }
        section {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        code {
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .question {
            background: #e8f4f8;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #007bff;
        }
        .answer {
            display: none;
            background: #f1f1f1;
            padding: 10px;
            margin-top: 5px;
        }
        .toggle-answer {
            color: #007bff;
            cursor: pointer;
            text-decoration: underline;
        }
        .code-box {
            position: relative;
        }
        .code-box::before {
            content: 'Command';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8em;
        }
        .code-box-python::before {
            content: 'Python';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8 RecognitionError: Invalid UUID string: a2b3c4d5-e6f7-48g9-h0i1-j2k3l4m5n6o7
System: I'm sorry, there was an error in generating the artifact due to an invalid UUID. Let me correct that and provide the HTML page for the **Models and Databases** topics with a valid UUID, styled like the reference HTML, including detailed explanations, code examples, and challenging questions with toggleable answers.

<xaiArtifact artifact_id="32e19190-a405-437b-9cdc-704e9e468510" artifact_version_id="e8d38a8a-1344-4dd0-b597-1292f6853c2b" title="models_and_databases.html" contentType="text/html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Models and Databases in Django</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f9f9f9;
            color: #333;
            margin: 0;
            padding: 0 20px;
        }
        header {
            background-color: #306998;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        h1 {
            margin: 0;
        }
        section {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        code {
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .question {
            background: #e8f4f8;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #007bff;
        }
        .answer {
            display: none;
            background: #f1f1f1;
            padding: 10px;
            margin-top: 5px;
        }
        .toggle-answer {
            color: #007bff;
            cursor: pointer;
            text-decoration: underline;
        }
        .code-box {
            position: relative;
        }
        .code-box::before {
            content: 'Command';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8em;
        }
        .code-box-python::before {
            content: 'Python';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Models and Databases in Django</h1>
    </header>

    <section>
        <h2>Defining Models and Fields</h2>
        <p>In Django, models define the structure of your database tables. A model is a Python class that inherits from <code>django.db.models.Model</code>, where each attribute represents a database field. Django’s ORM (Object-Relational Mapping) translates these models into SQL tables, allowing you to interact with the database using Python code.</p>
        <p><strong>Common Field Types:</strong></p>
        <ul>
            <li><code>CharField</code>: For short text (e.g., names), requires <code>max_length</code>.</li>
            <li><code>TextField</code>: For large text (e.g., descriptions).</li>
            <li ⎚System: Apologies for the interruption. The previous response was cut off due to an incomplete generation. I'll provide the complete HTML page for the **Models and Databases** topics, ensuring all sections are fully detailed, styled like the reference HTML, and include comprehensive explanations, code examples, and challenging questions with toggleable answers. The artifact will use the same valid UUID as the last attempt since this is a continuation of the same artifact.

<xaiArtifact artifact_id="d9e99625-f585-41b1-b580-41ba4a15bce1" artifact_version_id="1d45cddf-bacf-4cfa-bab4-d5c57924897c" title="models_and_databases.html" contentType="text/html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Models and Databases in Django</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f9f9f9;
            color: #333;
            margin: 0;
            padding: 0 20px;
        }
        header {
            background-color: #306998;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        h1 {
            margin: 0;
        }
        section {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        code {
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .question {
            background: #e8f4f8;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #007bff;
        }
        .answer {
            display: none;
            background: #f1f1f1;
            padding: 10px;
            margin-top: 5px;
        }
        .toggle-answer {
            color: #007bff;
            cursor: pointer;
            text-decoration: underline;
        }
        .code-box {
            position: relative;
        }
        .code-box::before {
            content: 'Command';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8em;
        }
        .code-box-python::before {
            content: 'Python';
            position: absolute;
            top: 0;
            right: 10px;
            color: #aaa;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Models and Databases in Django</h1>
    </header>

    <section>
        <h2>Defining Models and Fields</h2>
        <p>In Django, models define the structure of database tables. A model is a Python class that inherits from <code>django.db.models.Model</code>, where each attribute represents a database field. Django’s ORM (Object-Relational Mapping) translates these models into SQL tables, allowing Python-based database interactions.</p>
        <p><strong>Common Field Types:</strong></p>
        <ul>
            <li><code>CharField</code>: For short text (e.g., names), requires <code>max_length</code>.</li>
            <li><code>TextField</code>: For large text (e.g., descriptions).</li>
            <li><code>IntegerField</code>: For integers.</li>
            <li><code>BooleanField</code>: For true/false values.</li>
            <li><code>DateTimeField</code>: For date and time, with options like <code>auto_now</code> (updates on save).</li>
        </ul>
        <p><strong>Field Options:</strong> Fields can have options like <code>null=True</code> (allows NULL in database), <code>blank=True</code> (allows empty in forms), or <code>default</code> (sets a default value).</p>
        <p>Example model for a blog app:</p>
        <div class="code-box-python">
            <pre><code class="language-python">from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    published = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title
</code></pre>
        </div>
        <p>The <code>__str__</code> method provides a readable representation of the model instance.</p>

        <h2>Database Migrations</h2>
        <p>Migrations synchronize your database schema with model changes. When you modify a model (e.g., add a field), Django generates migration files to update the database.</p>
        <p><strong>Steps:</strong></p>
        <ol>
            <li>Modify <code>models.py</code>.</li>
            <li>Run <code>python manage.py makemigrations</code> to create migration files in the app’s <code>migrations/</code> directory.</li>
            <li>Apply migrations with <code>python manage.py migrate</code>.</li>
        </ol>
        <p>Example: After defining the <code>Post</code> model, create and apply migrations:</p>
        <div class="code-box">
            <pre><code class="language-bash">python manage.py makemigrations
python manage.py migrate
</code></pre>
        </div>
        <p>Migration files are stored as Python scripts (e.g., <code>0001_initial.py</code>) and track changes like table creation or field additions. Django supports multiple databases (SQLite, PostgreSQL, MySQL) via settings in <code>settings.py</code>.</p>

        <h2>QuerySets and ORM (CRUD Operations)</h2>
        <p>Django’s ORM allows database queries using Python instead of SQL. A <code>QuerySet</code> is a collection of database objects, supporting CRUD operations (Create, Read, Update, Delete).</p>
        <p><strong>CRUD Examples:</strong></p>
        <ul>
            <li><strong>Create:</strong> Add a new record.</li>
            <div class="code-box-python">
                <pre><code class="language-python">post = Post.objects.create(title="My Post", content="Hello, world!", published=True)
</code></pre>
            </div>
            <li><strong>Read:</strong> Retrieve records.</li>
            <div class="code-box-python">
                <pre><code class="language-python">all_posts = Post.objects.all()  # All posts
post = Post.objects.get(id=1)  # Single post by ID
published_posts = Post.objects.filter(published=True)  # Filtered posts
</code></pre>
            </div>
            <li><strong>Update:</strong> Modify existing records.</li>
            <div class="code-box-python">
                <pre><code class="language-python">post = Post.objects.get(id=1)
post.title = "Updated Title"
post.save()
</code></pre>
            </div>
            <li><strong>Delete:</strong> Remove records.</li>
            <div class="code-box-python">
                <pre><code class="language-python">post = Post.objects.get(id=1)
post.delete()
</code></pre>
            </div>
        </ul>
        <p><strong>QuerySet Methods:</strong> Use <code>filter()</code>, <code>exclude()</code>, <code>order_by()</code>, or <code>count()</code> for advanced queries. Example:</p>
        <div class="code-box-python">
            <pre><code class="language-python">recent_posts = Post.objects.filter(published=True).order_by('-created_at')[:5]
</code></pre>
        </div>

        <h2>Relationships (ForeignKey, ManyToMany, OneToOne)</h2>
        <p>Django supports three main relationship types to model associations between tables:</p>
        <ul>
            <li><strong>ForeignKey:</strong> A one-to-many relationship. Example: A post belongs to one author.</li>
            <div class="code-box-python">
                <pre><code class="language-python">class Author(models.Model):
    name = models.CharField(max_length=100)

class Post(models.Model):
    title = models.CharField(max_length=200)
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
</code></pre>
            </div>
            <p><code>on_delete=models.CASCADE</code> deletes posts if the author is deleted.</p>
            <li><strong>ManyToMany:</strong> A many-to-many relationship. Example: A post can have multiple tags, and a tag can apply to multiple posts.</li>
            <div class="code-box-python">
                <pre><code class="language-python">class Tag(models.Model):
    name = models.CharField(max_length=50)

class Post(models.Model):
    title = models.CharField(max_length=200)
    tags = models.ManyToManyField(Tag)
</code></pre>
            </div>
            <li><strong>OneToOne:</strong> A one-to-one relationship. Example: A user has one profile.</li>
            <div class="code-box-python">
                <pre><code class="language-python">from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    bio = models.TextField()
</code></pre>
            </div>
        </ul>
        <p><strong>Querying Relationships:</strong> Access related objects using dot notation or reverse lookups:</p>
        <div class="code-box-python">
            <pre><code class="language-python">post = Post.objects.get(id=1)
author_name = post.author.name  # Access author
posts_by_author = Author.objects.get(id=1).post_set.all()  # Reverse lookup
</code></pre>
        </div>

        <h2>Challenging Questions</h2>
        <div class="question">
            <p><strong>Question 1:</strong> What happens if you add a new field to a model without a <code>default</code> value or <code>null=True</code>, and how can you resolve the resulting migration error?</p>
            <span class="toggle-answer" onclick="toggleAnswer('answer1')">Show Answer</span>
            <div id="answer1" class="answer">
                <p><strong>Answer:</strong> Adding a non-nullable field without a default value causes a migration error because existing records need a value for the new field.</p>
                <p><strong>Fix:</strong> Provide a <code>default</code> value (e.g., <code>default=""</code> for <code>CharField</code>) or set <code>null=True</code>. Alternatively, during <code>makemigrations</code>, Django prompts you to specify a one-off default value.</p>
            </div>
        </div>

        <div class="question">
            <p><strong>Question 2:</strong> What is the difference between <code>filter()</code> and <code>get()</code> in QuerySets, and what error might occur with <code>get()</code>?</p>
            <span class="toggle-answer" onclick="toggleAnswer('answer2')">Show Answer</span>
            <div id="answer2" class="answer">
                <p><strong>Answer:</strong> <code>filter()</code> returns a QuerySet with all matching objects, while <code>get()</code> returns a single object. If <code>get()</code> finds no objects, it raises <code>DoesNotExist</code>; if multiple objects match, it raises <code>MultipleObjectsReturned</code>.</p>
                <p><strong>Fix:</strong> Use <code>filter()</code> for multiple results or handle exceptions with <code>try/except</code>.</p>
            </div>
        </div>

        <div class="question">
            <p><strong>Question 3:</strong> How does <code>on_delete</code> affect a <code>ForeignKey</code> relationship, and what are the differences between <code>CASCADE</code> and <code>SET_NULL</code>?</p>
            <span class="toggle-answer" onclick="toggleAnswer('answer3')">Show Answer</span>
            <div id="answer3" class="answer">
                <p><strong>Answer:</strong> The <code>on_delete</code> parameter specifies what happens to related objects when the referenced object is deleted. <code>CASCADE</code> deletes related objects (e.g., posts are deleted if their author is). <code>SET_NULL</code> sets the foreign key to <code>NULL</code>, requiring <code>null=True</code>.</p>
                <p><strong>Example:</strong> For a post’s author, <code>CASCADE</code> removes posts, while <code>SET_NULL</code> keeps posts but sets <code>author=None</code>.</p>
            </div>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script>
        function toggleAnswer(id) {
            const answer = document.getElementById(id);
            answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
<div style="text-align: right; padding: 10px;">
    <button onclick="window.print()" style="padding: 8px 16px; background-color: #0a2463; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">
      <i class="fas fa-print"></i> Print Page
    </button>
</div>
</html>